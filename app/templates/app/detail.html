{% extends "app/base.html" %}

{% block content %}

<section class="text-gray-600 body-font">
    <div class="container mx-auto flex px-5 py-10 items-center justify-center flex-col">
        <div class="carousel relative shadow-lg">
            <div class="carousel-inner relative overflow-hidden w-full">
                {% if travel_data.image %}
                    <input class="carousel-open" type="radio" id="carousel-1" name="carousel" aria-hidden="true" hidden="" checked="checked">
                    <div class="carousel-item absolute opacity-0 h-80">
                        <img src="{{ travel_data.image }}" class="block h-auto max-w-full">
                    </div>
                {% else %}
                    <input class="carousel-open" type="radio" id="carousel-1" name="carousel" aria-hidden="true" hidden="" checked="checked">
                    <div class="carousel-item absolute opacity-0 h-80">
                        <img src="https://placehold.jp/350x350.png?text=No Image" class="block h-auto max-w-full">
                    </div>
                {% endif %}
                {% if travel_data.roomImageUrl %}
                    <input class="carousel-open" type="radio" id="carousel-2" name="carousel" aria-hidden="true" hidden="">
                    <div class="carousel-item absolute opacity-0 h-80">
                        <img src="{{ travel_data.roomImageUrl }}" class="block h-auto max-w-full">
                    </div>
                {% else %}
                    <input class="carousel-open" type="radio" id="carousel-2" name="carousel" aria-hidden="true" hidden="" checked="checked">
                    <div class="carousel-item absolute opacity-0 h-80">
                        <img src="https://placehold.jp/350x350.png?text=No Image" class="block h-auto max-w-full">
                    </div>
                {% endif %}
                {% if travel_data.hotelMapImageUrl %}
                    <input class="carousel-open" type="radio" id="carousel-3" name="carousel" aria-hidden="true" hidden="">
                    <div class="carousel-item absolute opacity-0 h-80">
                        <img src="{{ travel_data.hotelMapImageUrl }}" class="block h-auto max-w-full">
                    </div>
                {% else %}
                    <input class="carousel-open" type="radio" id="carousel-3" name="carousel" aria-hidden="true" hidden="" checked="checked">
                    <div class="carousel-item absolute opacity-0 h-80">
                        <img src="https://placehold.jp/350x350.png?text=No Image" class="block h-auto max-w-full">
                    </div>
                {% endif %}
                <label for="carousel-3" class="carousel-control prev control-1">‹</label>
                <label for="carousel-2" class="carousel-control next control-1">›</label>
                <label for="carousel-1" class="carousel-control prev control-2">‹</label>
                <label for="carousel-3" class="carousel-control next control-2">›</label>
                <label for="carousel-2" class="carousel-control prev control-3">‹</label>
                <label for="carousel-1" class="carousel-control next control-3">›</label>
                <ol class="carousel-indicators">
                    <li>
                        <label for="carousel-1" class="carousel-bullet">●</label>
                    </li>
                    <li>
                        <label for="carousel-2" class="carousel-bullet">●</label>
                    </li>
                    <li>
                        <label for="carousel-3" class="carousel-bullet">●</label>
                    </li>
                </ol>
            </div>
        </div>
        <h1 class="text-4xl py-5 text-center flex">{{ travel_data.hotelname }}</h1>
        <a href="{% url 'addfavorite2' travel_data.hotelno %}">
            <button class="flex bg-blue-200 border border-black py-2 px-6 focus:outline-none hover:bg-blue-300 rounded text-lg">お気に入り</button>
        </a>
        <hr>
        <div class="flex">
            <!-- <div class="flex flex-col sm:flex-row">
                <img src="{{ travel_data.hotelMapImageUrl }}" class="h-80 w-auto" alt="">
            </div> -->
            <div class="flex flex-col sm:flex-row">
                <div class="sm:w-1/2 text-center sm:pr-8 sm:py-8">
                    {% if travel_data.rating_service == 0 or travel_data.rating_room == 0 or travel_data.rating_equipment == 0 or travel_data.rating_meal == 0 or travel_data.rating_location == 0 %}
                        <p class="mt-5">まだレビュー詳細はありません。</p>
                    {% else %}
                        <canvas class="mb-5" id="myRaderChart" height="200"></canvas>
                    {% endif %}
                </div>
                {% if not travel_data.reviewCount == 0 %}
                    <div class="sm:w-2/3 sm:pl-8 sm:py-8 sm:border-l border-gray-200 sm:border-t-0 border-t mt-4 pt-4 sm:mt-0 text-center sm:text-left">
                        <div class="align-items-center ml-2">
                            <p>住所：{{ travel_data.address }}{{ travel_data.address2 }}</p>
                            <p>アクセス：{{ travel_data.access }}</p>
                            <p>最寄り駅：{{ travel_data.nearestStation }}</p>
                            <p>駐車場情報：{{travel_data.parkingInformation}}</p>
                            <p>レビュー件数：{{ travel_data.reviewCount }}件</p>
                            <p>お客様の声：{{travel_data.userReview}}</p>
                            <a class="ml-4 inline-flex bg-blue-200 border border-black py-2 px-6 focus:outline-none hover:bg-blue-300 rounded text-lg" href="{{ travel_data.reviewUrl }}" target="_blank">他のお客様の声はこちらへ</a>
                        </div>

                    </div>
                {% else %}
                    <p>まだレビューはありません。</p>
                {% endif %}
                
                {% block extra_js %}
                <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.js"></script>
                {% endblock %}
            </div>
        </div>
    </div>
</section>


<script>
    const ctx = document.getElementById("myRaderChart");
    const myRadarChart = new Chart(ctx, {
        type: 'radar',
        data: {
            labels: ["サービス", "部屋", "設備", "食事", "立地"],
            datasets: [{
                display: false,
                data: [{{travel_data.rating_service}}, {{travel_data.rating_room}}, {{travel_data.rating_equipment}}, {{travel_data.rating_meal}}, {{travel_data.rating_location}}],
                backgroundColor: "rgb(130,220,170,0.9)",
                borderColor: "rgb(255,100,0)",
                borderWidth: 2,
                pointRadius: 3,
                pointBackgroundColor: 'RGB(255,50,0)'
            }]
        },
        options: {
            scale: {
                ticks: {
                    suggestedMin: 0,
                    suggestedMax: 5,
                    stepSize: 1,
                    callback: function (value, index, values) {
                        return ""
                    }
                },
                pointLabels: {       // 軸のラベル（"Python"など）
                fontSize: 18,         // 文字の大きさ
                fontColor: "black",    // 文字の色
                    },
                    angleLines: {        // 軸（放射軸）
                        display: true,
                        color: "black"
                    },
                    gridLines: {         // 補助線（目盛の線）
                        color: "black"
                    }
            },
            legend: {
                display: false,
                position: 'top',  //タイトルの設定
                labels: {
                    fontSize: 15,
                    fontColor: "black",
                    padding: 5
                }
            },
            title: {
                display: true,
                text: "レビュー ：★{{ travel_data.review }}",
                fontSize: 20,
                fontColor: '#000',
                padding:0
            },
        }
    });
</script>
{% endblock %}

